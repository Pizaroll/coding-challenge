<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splide.js Video Carousel</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }
        .carousel-container {
            width: 90%;
            max-width: 900px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .splide__slide {
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        h2.slide-title {
            font-size: 1.8em;
            margin-bottom: 10px;
            color: #333;
        }
        p.slide-description {
            font-size: 1.1em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <div class="carousel-container">
        <div id="video-carousel" class="splide" role="group" aria-label="Video Stories Carousel">
            <div class="splide__track">
                <ul class="splide__list">
                    </ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script>
        const slidesData = [
            {
                title: "The Roberts Family Story",
                description: "Brandon and Jennifer experienced many setbacks and obstacles before finally finding stability and a foundation to rebuild from at City Rescue Mission.",
                imgURL: "https://img.youtube.com/vi/QSWXiRiTHWA/maxresdefault.jpg", // Not directly used in this example, but kept for data integrity
                videoUrl: "https://www.youtube.com/embed/5" // Changed to embed URL for iframe
            },
            {
                title: "Jamie's Story",
                description: "Jamie and her 3 children faced eviction after fleeing domestic violence, and were searching for compassion and support during their season of homelessness. Watch how they found hope and restoration after walking through the doors of City Rescue Mission.",
                imgURL: "https://img.youtube.com/vi/zFCh8IvKZSo/maxresdefault.jpg", // Not directly used in this example
                videoUrl: "https://www.youtube.com/embed/7" // Changed to embed URL for iframe
            }
        ];

        // Function to extract YouTube video ID from a URL
        function getYouTubeVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        document.addEventListener('DOMContentLoaded', function () {
            const splideList = document.querySelector('#video-carousel .splide__list');

            slidesData.forEach(slide => {
                const li = document.createElement('li');
                li.classList.add('splide__slide');

                const videoId = getYouTubeVideoId(slide.videoUrl);
                const embedUrl = videoId ? `https://www.youtube.com/embed/${videoId}` : slide.videoUrl; // Ensure it's an embed URL

                li.innerHTML = `
                    <div class="video-wrapper">
                        <iframe src="${embedUrl}" allowfullscreen></iframe>
                    </div>
                    <h2 class="slide-title">${slide.title}</h2>
                    <p class="slide-description">${slide.description}</p>
                `;
                splideList.appendChild(li);
            });

            new Splide('#video-carousel', {
                type: 'loop', // Optional: Makes the carousel loop
                perPage: 1,
                autoplay: false, // Set to true if you want autoplay
                arrows: true,
                pagination: true,
                focus: 'center',
            }).mount();
        });
    </script>
</body>
</html>